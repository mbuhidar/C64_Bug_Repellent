#! /usr/bin/python3

from os import path
import sys


def write_binary(filename, int_list):
    """Write binary file readable on Commodore computers or emulators

    Args:
        filename (str): The file name of the file to write as binary
        int_list (list): List of integers to convert to binary bytes and 
            output write to file

    Returns:
        None: implicit return
    """
    
    with open(filename, "wb") as file:
        for byte in int_list:
            file.write(byte.to_bytes(1, byteorder='big'))


def check_overwrite(filename):
    overwrite = 'y'
    if path.isfile(filename):
        overwrite = input(f'Output file "{filename}" already exists. '
                           'Overwrite? (Y = yes) ')
    if overwrite.lower() == 'y':
        return True
    else:
        print('File not overwritten - exiting.')
        sys.exit(1)


def main(argv=None):

    bug_repellent_1 = [0, 192,
                       32, 161, 192, 165, 43, 133, 251, 165, 44, 133,
                       252, 160, 0, 230, 251, 208, 2, 230, 252, 177,
                       251, 208, 3, 76, 138, 192, 230, 251, 208, 2,
                       230, 252, 76, 43, 192, 76, 73, 78, 69, 32,
                       35, 32, 0, 169, 35, 160, 192, 32, 30, 171,
                       160, 0, 177, 251, 170, 230, 251, 208, 2, 230,
                       252, 177, 251, 32, 205, 189, 169, 58, 32, 210,
                       255, 169, 0, 133, 253, 230, 251, 208, 2, 230,
                       252, 165, 253, 160, 0, 76, 16, 193, 133, 253,
                       177, 251, 208, 237, 165, 253, 41, 240, 74, 74,
                       74, 74, 24, 105, 65, 32, 210, 255, 165, 253,
                       41, 15, 24, 105, 65, 32, 210, 255, 169, 13,
                       32, 220, 192, 230, 63, 208, 2, 230, 64, 230,
                       251, 208, 2, 230, 252, 76, 11, 192, 169, 153,
                       160, 192, 32, 30, 171, 166, 63, 165, 64, 76,
                       231, 192, 96, 76, 73, 78, 69, 83, 58, 32,
                       0, 169, 247, 160, 192, 32, 30, 171, 169, 3,
                       133, 254, 32, 228, 255, 201, 83, 240, 6, 201,
                       80, 208, 245, 230, 254, 32, 210, 255, 169, 4,
                       166, 254, 160, 255, 32, 186, 255, 169, 0, 133,
                       63, 133, 64, 32, 189, 255, 32, 192, 255, 166,
                       254, 32, 201, 255, 169, 13, 32, 210, 255, 96,
                       32, 210, 255, 173, 141, 2, 41, 1, 208, 249,
                       96, 32, 205, 189, 169, 13, 32, 210, 255, 32,
                       204, 255, 169, 4, 76, 195, 255, 147, 83, 67,
                       82, 69, 69, 78, 32, 79, 82, 32, 80, 82,
                       73, 78, 84, 69, 82, 32, 63, 32, 0, 0,
                       0, 0, 170, 177, 251, 201, 32, 240, 6, 138,
                       24, 113, 251, 10, 170, 138, 76, 88, 192, 0,
                       0, 0, 0, 0
                      ]

    bug_repellent_2 = [0, 192,
                       32, 161, 192, 165, 43, 133, 251, 165, 44, 133,
                       252, 160, 0, 132, 254, 32, 37, 193, 234, 177,
                       251, 208, 3, 76, 138, 192, 230, 251, 208, 2,
                       230, 252, 76, 43, 192, 76, 73, 78, 69, 32,
                       35, 32, 0, 169, 35, 160, 192, 32, 30, 171,
                       160, 0, 177, 251, 170, 230, 251, 208, 2, 230,
                       252, 177, 251, 32, 205, 189, 169, 58, 32, 210,
                       255, 169, 0, 133, 253, 230, 254, 32, 37, 193,
                       234, 165, 253, 160, 0, 76, 13, 193, 133, 253,
                       177, 251, 208, 237, 165, 253, 41, 240, 74, 74,
                       74, 74, 24, 105, 65, 32, 210, 255, 165, 253,
                       41, 15, 24, 105, 65, 32, 210, 255, 169, 13,
                       32, 220, 192, 230, 63, 208, 2, 230, 64, 230,
                       251, 208, 2, 230, 252, 76, 11, 192, 169, 153,
                       160, 192, 32, 30, 171, 166, 63, 165, 64, 76,
                       231, 192, 96, 76, 73, 78, 69, 83, 58, 32,
                       0, 169, 247, 160, 192, 32, 30, 171, 169, 3,
                       133, 254, 32, 228, 255, 201, 83, 240, 6, 201,
                       80, 208, 245, 230, 254, 32, 210, 255, 169, 4,
                       166, 254, 160, 255, 32, 186, 255, 169, 0, 133,
                       63, 133, 64, 133, 2, 32, 189, 255, 32, 192,
                       255, 166, 254, 32, 201, 255, 76, 73, 193, 96,
                       32, 210, 255, 173, 141, 2, 41, 1, 208, 249,
                       96, 32, 205, 189, 169, 13, 32, 210, 255, 32,
                       204, 255, 169, 4, 76, 195, 255, 147, 83, 67,
                       82, 69, 69, 78, 32, 79, 82, 32, 80, 82,
                       73, 78, 84, 69, 82, 32, 63, 32, 0, 76,
                       44, 193, 234, 177, 251, 201, 32, 240, 6, 138,
                       113, 251, 69, 254, 170, 138, 76, 88, 192, 0,
                       0, 0, 0, 230, 251, 208, 2, 230, 252, 96,
                       170, 177, 251, 201, 34, 208, 6, 165, 2, 73,
                       255, 133, 2, 165, 2, 208, 218, 177, 251, 201,
                       32, 208, 212, 198, 254, 76, 29, 193, 0, 169,
                       13, 76, 210, 255, 0, 0, 0
                      ]

    bug_repellent_3 = [0, 192,
                       169,79,32,210,255,162,38,160,192,204,3,3,
                       208,10,162,131,160,164,169,70,32,210,255,44,
                       169,78,32,210,255,142,2,3,140,3,3,76,
                       36,193,32,96,165,134,122,132,123,32,115,0,
                       170,240,243,162,255,134,58,144,3,76,150,164,
                       32,107,169,32,121,165,173,0,2,240,5,169,
                       79,141,2,3,76,162,164,169,0,133,2,133,
                       251,133,252,133,254,24,101,20,69,254,230,254,
                       24,101,21,69,254,170,230,254,164,252,185,0,
                       2,133,253,201,34,208,6,165,2,73,255,133,
                       2,201,32,208,4,165,2,240,8,138,24,101,
                       253,69,254,170,44,198,254,230,252,164,253,208,
                       213,138,41,240,74,74,74,74,24,105,129,141,
                       44,193,138,41,15,24,105,129,141,45,193,162,
                       0,189,43,193,240,12,157,0,4,173,134,2,
                       157,0,216,232,208,239,169,38,141,2,3,173,
                       48,193,240,23,165,161,201,212,176,4,165,160,
                       240,13,238,32,208,160,0,32,225,255,208,6,
                       32,33,193,76,38,192,232,208,242,200,208,239,
                       32,68,229,169,0,168,174,49,193,32,186,255,
                       173,50,193,162,51,160,193,32,189,255,169,43,
                       166,45,164,46,32,216,255,162,1,189,51,193,
                       168,200,152,201,58,144,2,169,48,157,51,193,
                       201,48,208,3,202,16,234,32,33,193,76,116,
                       164,206,32,208,169,0,170,168,76,219,255,160,
                       1,1,160,0,0,65,72,79,89,33,0,0
                      ]                       
    
    # Write binary file compatible with Commodore computers or emulators
    bin_file = 'repellent_asm3.prg'
    if check_overwrite(bin_file):
        write_binary(bin_file, bug_repellent_3)

if __name__ == '__main__':
    sys.exit(main())
